ggplot(aes(x=fecha,y=sindicatos))+geom_line()+theme_bw() +
scale_y_continuous(labels=function(x) format(x, big.mark = ".", scientific = FALSE)) +
labs(subtitle = "Sindicatos activos en Chile (2019-2021)",
x="Tiempo",
y = "Sindicatos") +
geom_vline(xintercept = ymd("2019-10-01"),linetype = "dashed", colour = "red") +
geom_vline(xintercept = ymd("2020-03-01"),linetype = "dashed", colour = "red")
g1<-base %>% mutate(FechaConstitucion=ymd(FechaConstitucion) ) %>%
filter(FechaConstitucion>=ymd("2019-01-01")) %>%
mutate(ano_constitucion=year(FechaConstitucion),mes_constitucion=month(FechaConstitucion)) %>%
group_by(ano_constitucion,mes_constitucion) %>% summarise(sindicatos_constituidos=n()) %>%
mutate(FechaConstitucion=make_date(year=ano_constitucion,month=mes_constitucion)) %>%
ggplot(aes(x=FechaConstitucion,y=sindicatos_constituidos))+geom_line()+theme_bw() +
scale_y_continuous(labels=function(x) format(x, big.mark = ".", scientific = FALSE)) +
labs(subtitle = "Sindicatos constituidos cada mes en Chile",
y = "Sindicatos") +
geom_vline(xintercept = ymd("2019-10-01"),linetype = "dashed", colour = "red") +
geom_vline(xintercept = ymd("2020-03-01"),linetype = "dashed", colour = "red")
ggarrange(g1,g2,ncol = 2,common.legend = TRUE) %>%
annotate_figure(top = text_grob("Sindicalismo durante el estallido social y la pandemia (2019-2021)",
color = "red", face = "bold", size = 14),
bottom = text_grob("Por Repositorio de Estadísticas Sindicales (RES),
En base a datos de la Ventanilla Sindical Transparencia Dirección del Trabajo.
Verticales de color rojo indican estallido social e inicio de la pandemia en Chile",
color = "black", hjust = 1, x = 1, size = 8))
g1<-base %>% mutate(FechaConstitucion=ymd(FechaConstitucion) ) %>%
filter(FechaConstitucion>=ymd("2019-01-01")) %>%
mutate(ano_constitucion=year(FechaConstitucion),mes_constitucion=month(FechaConstitucion)) %>%
group_by(ano_constitucion,mes_constitucion) %>% summarise(sindicatos_constituidos=n()) %>%
mutate(FechaConstitucion=make_date(year=ano_constitucion,month=mes_constitucion)) %>%
ggplot(aes(x=FechaConstitucion,y=sindicatos_constituidos))+geom_line()+theme_bw() +
scale_y_continuous(labels=function(x) format(x, big.mark = ".", scientific = FALSE)) +
labs(subtitle = "Sindicatos constituidos cada mes en Chile",
x="Tiempo",
y = "Sindicatos") +
geom_vline(xintercept = ymd("2019-10-01"),linetype = "dashed", colour = "red") +
geom_vline(xintercept = ymd("2020-03-01"),linetype = "dashed", colour = "red")
g2<-sindicatos %>% filter(fecha>=ymd("2019-01-01")) %>%
ggplot(aes(x=fecha,y=sindicatos))+geom_line()+theme_bw() +
scale_y_continuous(labels=function(x) format(x, big.mark = ".", scientific = FALSE)) +
labs(subtitle = "Sindicatos activos en Chile (2019-2021)") +
geom_vline(xintercept = ymd("2019-10-01"),linetype = "dashed", colour = "red") +
geom_vline(xintercept = ymd("2020-03-01"),linetype = "dashed", colour = "red")
ggarrange(g1,g2,ncol = 2,common.legend = TRUE) %>%
annotate_figure(top = text_grob("Sindicalismo durante el estallido social y la pandemia (2019-2021)",
color = "red", face = "bold", size = 14),
bottom = text_grob("Por Repositorio de Estadísticas Sindicales (RES),
En base a datos de la Ventanilla Sindical Transparencia Dirección del Trabajo.
Verticales de color rojo indican estallido social e inicio de la pandemia en Chile",
color = "black", hjust = 1, x = 1, size = 8))
ggsave(
plot = last_plot(),
filename = "../OUTPUT/Graficos/Nacionales/Grafico2019-2021.png",
device = "png",
dpi = "retina",
units = "cm",
width = 30,
height = 20
)
g1<-base %>% mutate(FechaConstitucion=ymd(FechaConstitucion) ) %>%
filter(FechaConstitucion>=ymd("2019-01-01")) %>%
mutate(ano_constitucion=year(FechaConstitucion),mes_constitucion=month(FechaConstitucion)) %>%
group_by(ano_constitucion,mes_constitucion) %>% summarise(sindicatos_constituidos=n()) %>%
mutate(FechaConstitucion=make_date(year=ano_constitucion,month=mes_constitucion)) %>%
ggplot(aes(x=FechaConstitucion,y=sindicatos_constituidos))+geom_line()+theme_bw() +
scale_y_continuous(labels=function(x) format(x, big.mark = ".", scientific = FALSE)) +
labs(subtitle = "Sindicatos constituidos cada mes en Chile",
x="Tiempo",
y = "Sindicatos") +
geom_vline(xintercept = ymd("2019-10-01"),linetype = "dashed", colour = "red") +
geom_vline(xintercept = ymd("2020-03-01"),linetype = "dashed", colour = "red")
g2<-sindicatos %>% filter(fecha>=ymd("2019-01-01")) %>%
ggplot(aes(x=fecha,y=sindicatos))+geom_line()+theme_bw() +
scale_y_continuous(labels=function(x) format(x, big.mark = ".", scientific = FALSE)) +
labs(subtitle = "Sindicatos activos en Chile (2019-2021)",
x="Tiempo",
y = "Sindicatos") +
geom_vline(xintercept = ymd("2019-10-01"),linetype = "dashed", colour = "red") +
geom_vline(xintercept = ymd("2020-03-01"),linetype = "dashed", colour = "red")
ggarrange(g1,g2,ncol = 2,common.legend = TRUE) %>%
annotate_figure(top = text_grob("Sindicalismo durante el estallido social y la pandemia (2019-2021)",
color = "red", face = "bold", size = 14),
bottom = text_grob("Por Repositorio de Estadísticas Sindicales (RES),
En base a datos de la Ventanilla Sindical Transparencia Dirección del Trabajo.
Verticales de color rojo indican estallido social e inicio de la pandemia en Chile",
color = "black", hjust = 1, x = 1, size = 8))
g1<-base %>% mutate(FechaConstitucion=ymd(FechaConstitucion) ) %>%
filter(FechaConstitucion>=ymd("2018-01-01")) %>%
mutate(ano_constitucion=year(FechaConstitucion),mes_constitucion=month(FechaConstitucion)) %>%
group_by(ano_constitucion,mes_constitucion) %>% summarise(sindicatos_constituidos=n()) %>%
mutate(FechaConstitucion=make_date(year=ano_constitucion,month=mes_constitucion)) %>%
ggplot(aes(x=FechaConstitucion,y=sindicatos_constituidos))+geom_line()+theme_bw() +
scale_y_continuous(labels=function(x) format(x, big.mark = ".", scientific = FALSE)) +
labs(subtitle = "Sindicatos constituidos cada mes en Chile",
x="Tiempo",
y = "Sindicatos") +
geom_vline(xintercept = ymd("2019-10-01"),linetype = "dashed", colour = "red") +
geom_vline(xintercept = ymd("2020-03-01"),linetype = "dashed", colour = "red")
g2<-sindicatos %>% filter(fecha>=ymd("2018-01-01")) %>%
ggplot(aes(x=fecha,y=sindicatos))+geom_line()+theme_bw() +
scale_y_continuous(labels=function(x) format(x, big.mark = ".", scientific = FALSE)) +
labs(subtitle = "Sindicatos activos en Chile (2019-2021)",
x="Tiempo",
y = "Sindicatos") +
geom_vline(xintercept = ymd("2019-10-01"),linetype = "dashed", colour = "red") +
geom_vline(xintercept = ymd("2020-03-01"),linetype = "dashed", colour = "red")
library(ggpubr)
ggarrange(g1,g2,ncol = 2,common.legend = TRUE) %>%
annotate_figure(top = text_grob("Sindicalismo durante el estallido social y la pandemia (2019-2021)",
color = "red", face = "bold", size = 14),
bottom = text_grob("Por Repositorio de Estadísticas Sindicales (RES),
En base a datos de la Ventanilla Sindical Transparencia Dirección del Trabajo.
Verticales de color rojo indican estallido social e inicio de la pandemia en Chile",
color = "black", hjust = 1, x = 1, size = 8))
g1<-base %>% mutate(FechaConstitucion=ymd(FechaConstitucion) ) %>%
filter(FechaConstitucion>=ymd("2018-01-01")) %>%
mutate(ano_constitucion=year(FechaConstitucion),mes_constitucion=month(FechaConstitucion)) %>%
group_by(ano_constitucion,mes_constitucion) %>% summarise(sindicatos_constituidos=n()) %>%
mutate(FechaConstitucion=make_date(year=ano_constitucion,month=mes_constitucion)) %>%
ggplot(aes(x=FechaConstitucion,y=sindicatos_constituidos))+geom_line()+theme_bw() +
scale_y_continuous(labels=function(x) format(x, big.mark = ".", scientific = FALSE)) +
labs(subtitle = "Sindicatos constituidos cada mes en Chile",
x="Tiempo",
y = "Sindicatos") +
geom_vline(xintercept = ymd("2019-10-01"),linetype = "dashed", colour = "red") +
geom_vline(xintercept = ymd("2020-03-01"),linetype = "dashed", colour = "red")
g2<-sindicatos %>% filter(fecha>=ymd("2018-01-01")) %>%
ggplot(aes(x=fecha,y=sindicatos))+geom_line()+theme_bw() +
scale_y_continuous(labels=function(x) format(x, big.mark = ".", scientific = FALSE)) +
labs(subtitle = "Sindicatos activos en Chile (2019-2021)",
x="Tiempo",
y = "Sindicatos") +
geom_vline(xintercept = ymd("2019-10-01"),linetype = "dashed", colour = "red") +
geom_vline(xintercept = ymd("2020-03-01"),linetype = "dashed", colour = "red")
ggarrange(g1,g2,ncol = 2,common.legend = TRUE) %>%
annotate_figure(top = text_grob("Sindicalismo durante el estallido social y la pandemia (2018-2021)",
color = "red", face = "bold", size = 14),
bottom = text_grob("Por Repositorio de Estadísticas Sindicales (RES),
En base a datos de la Ventanilla Sindical Transparencia Dirección del Trabajo.
Verticales de color rojo indican estallido social e inicio de la pandemia en Chile",
color = "black", hjust = 1, x = 1, size = 8))
ggsave(
plot = last_plot(),
filename = "../OUTPUT/Graficos/Nacionales/Grafico2018-2021.png",
device = "png",
dpi = "retina",
units = "cm",
width = 30,
height = 20
)
categoria_ocupacion<-read.xlsx("http://www.ine.cl/docs/default-source/ocupacion-y-desocupacion/cuadros-estadisticos/series-de-tiempo-nueva-calibraci%C3%B3n-proyecciones-de-poblaci%C3%B3n-censo-2017/serie-categor%C3%ADa-en-la-ocupaci%C3%B3n.xlsx?sfvrsn=70dc54db_24",sheet = 2,startRow = 6)
library(readxl)
library(tidyverse)
library(lubridate)
library(openxlsx)
categoria_ocupacion<-read.xlsx("http://www.ine.cl/docs/default-source/ocupacion-y-desocupacion/cuadros-estadisticos/series-de-tiempo-nueva-calibraci%C3%B3n-proyecciones-de-poblaci%C3%B3n-censo-2017/serie-categor%C3%ADa-en-la-ocupaci%C3%B3n.xlsx?sfvrsn=70dc54db_24",sheet = 2,startRow = 6)
nombres<-names(categoria_ocupacion)
categoria_ocupacion<-read.xlsx("http://www.ine.cl/docs/default-source/ocupacion-y-desocupacion/cuadros-estadisticos/series-de-tiempo-nueva-calibraci%C3%B3n-proyecciones-de-poblaci%C3%B3n-censo-2017/serie-categor%C3%ADa-en-la-ocupaci%C3%B3n.xlsx?sfvrsn=70dc54db_24", sheet = 2,startRow = 7)
categoria_ocupacion<-categoria_ocupacion[1:(nrow(categoria_ocupacion)-9),c(1,2,4,6,8,10,12,14,16,18,20,22,24,26)]
nombres<-nombres[c(1,2,4-1,6-1,8-1,10-1,12-1,14-1,16-1,18-1,20-1,22-1,24-1,26-1)]
names(categoria_ocupacion)<-nombres
categoria_ocupacion %>% filter(Trimestre=="Oct - Dic") %>% select(`Asalariados.(Total)./4`,
`Personal.de.servicio.doméstico.(Total)./6`,
`Asalariados.(Sector.privado)`)
categoria_ocupacion %>% filter(Trimestre=="Oct - Dic")
categoria_ocupacion %>% filter(Trimestre=="Oct - Dic") %>% select(Año,Trimestre,`Asalariados.(Total)./4`,
`Personal.de.servicio.doméstico.(Total)./6`,
`Asalariados.(Sector.privado)`)
categoria_ocupacion %>% filter(Trimestre=="Oct - Dic") %>% select(Año,Trimestre,`Asalariados.(Total)./4`,
`Personal.de.servicio.doméstico.(Total)./6`,
`Asalariados.(Sector.privado)`)
View(categoria_ocupacion)
categoria_ocupacion<-categoria_ocupacion %>% filter(Trimestre=="Oct - Dic") %>% select(Año,Trimestre,
Total.de.ocupados,
`Asalariados.(Total)./4`,
`Personal.de.servicio.doméstico.(Total)./6`,
`Asalariados.(Sector.privado)`)
View(categoria_ocupacion)
afiliados_tipo %>% filter(fecha==ymd("2020-11-01")) %>%
mutate(Total=`SINDICATO EMPRESA`+`SINDICATO ESTABLECIMIENTO`+`SINDICATO INDEPENDIENTE`+
`SINDICATO INTER EMPRESA`+`SINDICATO TRANSITORIO`) %>% select(Total)
library(readxl)
library(tidyverse)
library(lubridate)
library(openxlsx)
load("../INPUT/basesDT.Rdata")
fecha<-data.frame(ano=c(rep(1920:2020,each=12),rep(2021,each=3)),
mes=c(rep(1:12,(2020-1920+1)),1,2,3))
#### IV. NUMERO DE SINDICATOS ACTIVOS POR AÑO ####
sindicatos<-data.frame(1:nrow(fecha))
for(i in 1:nrow(sindicatos)){
sindicatos[i,1] <- get(
fecha[i,] %>% mutate(base=paste0("proxy_",ano,"_",mes)) %>% select(base) %>% as.character()
) %>% nrow()
}
sindicatos<-sindicatos %>% cbind(fecha) %>% mutate(fecha=ymd(paste0(ano,"-",mes,"-01"))) %>% rename(sindicatos=X1.nrow.fecha.)
wb <- createWorkbook()
addWorksheet(wb, sheetName = "base mensual sindicatos", gridLines = TRUE)
writeData(wb = wb, sheet = "base mensual sindicatos", x = sindicatos)
firma<-c("Elaborado por Nicolás Ratto para Repositorio de Estadísticas Sindicales (RES): repositoriosindical.netlify.app/",
"En base a datos de la ventanilla sindical de la Dirección del Trabajo: http://tramites.dirtrab.cl/VentanillaTransparencia/Transparencia/RerporteRRLLOrg.aspx") %>% as.data.frame()
writeData(wb = wb, sheet = "base mensual sindicatos", x = firma,startCol = 9, startRow = 2)
saveWorkbook(wb = wb, file = "../OUTPUT/base mensual sindicatos anidada.xlsx",
overwrite = TRUE)
sindicatos %>%
ggplot(aes(x=fecha,y=sindicatos))+geom_line()+theme_bw() +
scale_y_continuous(labels=function(x) format(x, big.mark = ".", scientific = FALSE)) +
labs(title = "Número de sindicatos activos en Chile (1920-2021)",
x="Tiempo",
y = "Sindicatos",
caption = "Por Repositorio de Estadísticas Sindicales (RES),
En base a datos de la Ventanilla Sindical Transparencia Dirección del Trabajo.")
ggsave(
plot = last_plot(),
filename = "../OUTPUT/Graficos/Nacionales/Grafico1_sindicatos.png",
device = "png",
dpi = "retina",
units = "cm",
width = 25,
height = 20
)
afiliados<-data.frame(1:nrow(fecha),
1:nrow(fecha),
1:nrow(fecha))
for(i in 1:nrow(sindicatos)){
afiliados[i,] <- get(
fecha[i,] %>% mutate(base=paste0("proxy_",ano,"_",mes)) %>% select(base) %>% as.character()
) %>% mutate(afiliados=Socios+Socias) %>% select(Socios, Socias ,afiliados) %>% apply(2,sum)
}
afiliados<-afiliados %>% cbind(fecha) %>% mutate(fecha=ymd(paste0(ano,"-",mes,"-01")))
names(afiliados)<-c("Socios","Socias","Total","ano","mes","fecha")
wb <- createWorkbook()
addWorksheet(wb, sheetName = "base mensual afiliados", gridLines = TRUE)
writeData(wb = wb, sheet = "base mensual afiliados", x = afiliados)
firma<-c("Elaborado por Nicolás Ratto para Repositorio de Estadísticas Sindicales (RES): repositoriosindical.netlify.app/",
"En base a datos de la ventanilla sindical de la Dirección del Trabajo: http://tramites.dirtrab.cl/VentanillaTransparencia/Transparencia/RerporteRRLLOrg.aspx") %>% as.data.frame()
writeData(wb = wb, sheet = "base mensual afiliados", x = firma,startCol = 9, startRow = 2)
saveWorkbook(wb = wb, file = "../OUTPUT/base mensual afiliados anidada.xlsx",
overwrite = TRUE)
afiliados %>%
ggplot(aes(x=fecha,y=Total))+geom_line()+theme_bw() +
scale_y_continuous(labels=function(x) format(x, big.mark = ".", scientific = FALSE)) +
labs(title = "Número de afiliados/as a sindicatos activos en Chile (1920-2021)",
x="Tiempo",
y = "Sindicatos",
caption = "Por Repositorio de Estadísticas Sindicales (RES),
En base a datos de la Ventanilla Sindical Transparencia Dirección del Trabajo.")
ggsave(
plot = last_plot(),
filename = "../OUTPUT/Graficos/Nacionales/Grafico2_afiliados.png",
device = "png",
dpi = "retina",
units = "cm",
width = 25,
height = 20
)
afiliados %>% select(fecha,Socios,Socias) %>% pivot_longer(cols = c(Socios,Socias)) %>%
ggplot(aes(x=fecha,y=value,color=name))+geom_line()+theme_bw() +
scale_y_continuous(labels=function(x) format(x, big.mark = ".", scientific = FALSE)) +
labs(title = "Socios y socias afiliados/as a sindicatos activos en Chile (1920-2021)",
x="Tiempo",
y = "Sindicatos",
caption = "Por Repositorio de Estadísticas Sindicales (RES),
En base a datos de la Ventanilla Sindical Transparencia Dirección del Trabajo.") +
scale_color_manual(values=c("red","black"))
ggsave(
plot = last_plot(),
filename = "../OUTPUT/Graficos/Nacionales/Grafico2_afiliados_sexo.png",
device = "png",
dpi = "retina",
units = "cm",
width = 25,
height = 20
)
afiliados_tipo<-data.frame(1:nrow(fecha),
1:nrow(fecha),
1:nrow(fecha),
1:nrow(fecha),
1:nrow(fecha))
for(i in 1:nrow(sindicatos)){
afiliados_tipo[i,] <- get(
fecha[i,] %>% mutate(base=paste0("proxy_",ano,"_",mes)) %>% select(base) %>% as.character()
) %>% mutate(afiliados=Socios+Socias) %>% group_by(glosa1) %>% summarise(afiliados=sum(afiliados)) %>%
pivot_wider(names_from = glosa1,values_from = afiliados)
}
afiliados_tipo<-afiliados_tipo %>% cbind(fecha) %>% mutate(fecha=ymd(paste0(ano,"-",mes,"-01")))
names(afiliados_tipo)<-c("SINDICATO EMPRESA","SINDICATO ESTABLECIMIENTO","SINDICATO INDEPENDIENTE","SINDICATO INTER EMPRESA",
"SINDICATO TRANSITORIO","ano","mes","fecha")
wb <- createWorkbook()
addWorksheet(wb, sheetName = "base mensual afiliados_tipo", gridLines = TRUE)
writeData(wb = wb, sheet = "base mensual afiliados_tipo", x = afiliados_tipo)
firma<-c("Elaborado por Nicolás Ratto para Repositorio de Estadísticas Sindicales (RES): repositoriosindical.netlify.app/",
"En base a datos de la ventanilla sindical de la Dirección del Trabajo: http://tramites.dirtrab.cl/VentanillaTransparencia/Transparencia/RerporteRRLLOrg.aspx") %>% as.data.frame()
writeData(wb = wb, sheet = "base mensual afiliados_tipo", x = firma,startCol = 11, startRow = 2)
saveWorkbook(wb = wb, file = "../OUTPUT/base mensual afiliados_tipo anidada.xlsx",
overwrite = TRUE)
afiliados_tipo %>% select(fecha,1:5) %>% pivot_longer(2:6) %>%
ggplot(aes(x=fecha,y=value,color=name))+geom_line()+theme_bw() +
scale_y_continuous(labels=function(x) format(x, big.mark = ".", scientific = FALSE)) +
labs(title = "Afiliados a sindicatos activos por tipo de sindicatos en Chile (1920-2021)",
x="Tiempo",
y = "Sindicatos",
caption = "Por Repositorio de Estadísticas Sindicales (RES),
En base a datos de la Ventanilla Sindical Transparencia Dirección del Trabajo.") +
scale_color_manual(values=c("red","black","green","blue","purple")) +
theme(legend.position = "bottom")
ggsave(
plot = last_plot(),
filename = "../OUTPUT/Graficos/Nacionales/Grafico2_afiliados_tipo_sindicato.png",
device = "png",
dpi = "retina",
units = "cm",
width = 25,
height = 20
)
afiliados_tipo %>% filter(fecha==ymd("2020-11-01")) %>%
mutate(Total=`SINDICATO EMPRESA`+`SINDICATO ESTABLECIMIENTO`+`SINDICATO INDEPENDIENTE`+
`SINDICATO INTER EMPRESA`+`SINDICATO TRANSITORIO`) %>% select(Total)
afiliados_tipo %>% filter(fecha==ymd("2020-11-01")) %>%
mutate(Total=`SINDICATO EMPRESA`+`SINDICATO ESTABLECIMIENTO`+
`SINDICATO INTER EMPRESA`+`SINDICATO TRANSITORIO`) %>% select(Total)
categoria_ocupacion
categoria_ocupacion<-read.xlsx("http://www.ine.cl/docs/default-source/ocupacion-y-desocupacion/cuadros-estadisticos/series-de-tiempo-nueva-calibraci%C3%B3n-proyecciones-de-poblaci%C3%B3n-censo-2017/serie-categor%C3%ADa-en-la-ocupaci%C3%B3n.xlsx?sfvrsn=70dc54db_24",sheet = 2,startRow = 6)
nombres<-names(categoria_ocupacion)
categoria_ocupacion<-read.xlsx("http://www.ine.cl/docs/default-source/ocupacion-y-desocupacion/cuadros-estadisticos/series-de-tiempo-nueva-calibraci%C3%B3n-proyecciones-de-poblaci%C3%B3n-censo-2017/serie-categor%C3%ADa-en-la-ocupaci%C3%B3n.xlsx?sfvrsn=70dc54db_24", sheet = 2,startRow = 7)
categoria_ocupacion<-categoria_ocupacion[1:(nrow(categoria_ocupacion)-9),c(1,2,4,6,8,10,12,14,16,18,20,22,24,26)]
nombres<-nombres[c(1,2,4-1,6-1,8-1,10-1,12-1,14-1,16-1,18-1,20-1,22-1,24-1,26-1)]
names(categoria_ocupacion)<-nombres
categoria_ocupacion<-categoria_ocupacion %>% filter(Trimestre=="Oct - Dic")
categoria_ocupacion<-categoria_ocupacion %>% mutate(ft_ocupada1=Total.de.ocupados,
ft_ocupada2=(Total.de.ocupados-`Independientes.(Empleadores)`-
`Independientes.(Familiares.no.remunerados)`-`Asalariado.(Sector.público)./5`),
ft_ocupada3=`Asalariado.(Sector.público)./5`+ `Personal.de.servicio.doméstico.(Total)./6`)
View(categoria_ocupacion)
categoria_ocupacion<-categoria_ocupacion %>% mutate(ft_ocupada1=Total.de.ocupados,
ft_ocupada2=(Total.de.ocupados-`Independientes.(Empleadores)`-
`Independientes.(Familiares.no.remunerados)`-`Asalariado.(Sector.público)./5`),
ft_ocupada3=(`Asalariado.(Sector.público)./5`+ `Personal.de.servicio.doméstico.(Total)./6`))
categoria_ocupacion<-categoria_ocupacion %>% mutate(ft_ocupada1=Total.de.ocupados,
ft_ocupada2=(Total.de.ocupados-`Independientes.(Empleadores)`-
`Independientes.(Familiares.no.remunerados)`-`Asalariado.(Sector.público)./5`),
ft_ocupada3=(`Asalariados.(Sector.privado)`+ `Personal.de.servicio.doméstico.(Total)./6`))
View(categoria_ocupacion)
categoria_ocupacion<-categoria_ocupacion %>%
mutate(ft_ocupada1=Total.de.ocupados*1000,
ft_ocupada2=(Total.de.ocupados-`Independientes.(Empleadores)`-
`Independientes.(Familiares.no.remunerados)`-`Asalariado.(Sector.público)./5`)*1000,
ft_ocupada3=(`Asalariados.(Sector.privado)`+ `Personal.de.servicio.doméstico.(Total)./6`)*1000)
View(categoria_ocupacion)
View(categoria_ocupacion)
afiliados_tipo %>% filter(fecha>=ymd("2010-11-01")) %>%
mutate(Total=`SINDICATO EMPRESA`+`SINDICATO ESTABLECIMIENTO`+`SINDICATO INDEPENDIENTE`+
`SINDICATO INTER EMPRESA`+`SINDICATO TRANSITORIO`)
afiliados_tipo %>% filter(fecha>=ymd("2010-11-01")&fecha==month("11"))
afiliados_tipo %>% filter(fecha>=ymd("2010-11-01")&fecha==month(11))
afiliados_tipo %>% filter(fecha>=ymd("2010-11-01")) %>%
filter(month(fecha)==11)
afiliados_tipo %>% filter(fecha>=ymd("2010-11-01")) %>%
filter(month(fecha)==11)
afiliados_tipo %>% filter(fecha>=ymd("2010-11-01")) %>%
filter(month(fecha)==11) %>%
mutate(s1=`SINDICATO EMPRESA`+`SINDICATO ESTABLECIMIENTO`+`SINDICATO INDEPENDIENTE`+
`SINDICATO INTER EMPRESA`+`SINDICATO TRANSITORIO`) %>% select(s1) %>% mutate(s2=s1)
afiliados_tipo %>% filter(fecha>=ymd("2010-11-01")) %>%
filter(month(fecha)==11) %>%
mutate(s1=`SINDICATO EMPRESA`+`SINDICATO ESTABLECIMIENTO`+`SINDICATO INDEPENDIENTE`+
`SINDICATO INTER EMPRESA`+`SINDICATO TRANSITORIO`) %>% select(s1) %>% mutate(s2=s1) %>% cbind(categoria_ocupacion)
categoria_ocupacion<-afiliados_tipo %>% filter(fecha>=ymd("2010-11-01")) %>%
filter(month(fecha)==11) %>%
mutate(s1=`SINDICATO EMPRESA`+`SINDICATO ESTABLECIMIENTO`+`SINDICATO INDEPENDIENTE`+
`SINDICATO INTER EMPRESA`+`SINDICATO TRANSITORIO`) %>% select(s1) %>% mutate(s2=s1) %>% cbind(categoria_ocupacion)
categoria_ocupacion<-afiliados_tipo %>% filter(fecha>=ymd("2010-11-01")) %>%
filter(month(fecha)==11) %>%
mutate(s3=`SINDICATO EMPRESA`+`SINDICATO ESTABLECIMIENTO`+
`SINDICATO INTER EMPRESA`+`SINDICATO TRANSITORIO`) %>% select(s3) %>% cbind(categoria_ocupacion)
categoria_ocupacion %>% mutate(ts1=s1/ft_ocupada1,
ts2=s2/ft_ocupada2,
ts3=s3/ft_ocupada3)
categoria_ocupacion<-categoria_ocupacion %>% mutate(ts1=s1/ft_ocupada1,
ts2=s2/ft_ocupada2,
ts3=s3/ft_ocupada3)
categoria_ocupacion
categoria_ocupacion[Año==2020,]
categoria_ocupacion["Año"==2020,]
categoria_ocupacion[categoria_ocupacion$Año==2020,c("ts1")]
categoria_ocupacion[categoria_ocupacion$Año==2020,c("ts1")]
categoria_ocupacion[categoria_ocupacion$Año==2020,c("ts1")]*100
categoria_ocupacion<-categoria_ocupacion %>% mutate(ts1=s1/ft_ocupada1*100,
ts2=s2/ft_ocupada2*100,
ts3=s3/ft_ocupada3*100)
categoria_ocupacion %>% select(fecha,ts1,ts2,ts3)
categoria_ocupacion
categoria_ocupacion %>% select(Año,ts1,ts2,ts3)
categoria_ocupacion %>% select(Año,ts1,ts2,ts3) %>% pivot_longer(c(ts1,ts2,ts3))
categoria_ocupacion %>% select(Año,ts1,ts2,ts3) %>% pivot_longer(c(ts1,ts2,ts3)) %>%
ggplot(aes(x=Año,y=value,color=name)) + geom_line() + geom_point() +theme_bw() +
labs(title = "Tasas de afiliación sindical en Chile no oficiales (2010-2020)",
x="Tiempo",
y = "Sindicatos",
caption = "Por Repositorio de Estadísticas Sindicales (RES),
En base a datos de la Ventanilla Sindical Transparencia Dirección del Trabajo y
Series históricas de ocupados del Instituto Nacional de Estadística.") +
scale_color_manual(values=c("red","black","purple")) +
theme(legend.position = "bottom")
categoria_ocupacion %>% select(Año,ts1,ts2,ts3) %>% pivot_longer(c(ts1,ts2,ts3)) %>%
ggplot(aes(x=Año,y=value,color=name)) + geom_line() +theme_bw() +
labs(title = "Tasas de afiliación sindical en Chile no oficiales (2010-2020)",
x="Tiempo",
y = "Sindicatos",
caption = "Por Repositorio de Estadísticas Sindicales (RES),
En base a datos de la Ventanilla Sindical Transparencia Dirección del Trabajo y
Series históricas de ocupados del Instituto Nacional de Estadística.") +
scale_color_manual(values=c("red","black","purple")) +
theme(legend.position = "bottom")
class(categoria_ocupacion$Año)
categoria_ocupacion$Año<-as.numeric(categoria_ocupacion$Año)
categoria_ocupacion %>% select(Año,ts1,ts2,ts3) %>% pivot_longer(c(ts1,ts2,ts3)) %>%
ggplot(aes(x=Año,y=value,color=name)) + geom_line() + geom_point() +theme_bw() +
labs(title = "Tasas de afiliación sindical en Chile no oficiales (2010-2020)",
x="Tiempo",
y = "Sindicatos",
caption = "Por Repositorio de Estadísticas Sindicales (RES),
En base a datos de la Ventanilla Sindical Transparencia Dirección del Trabajo y
Series históricas de ocupados del Instituto Nacional de Estadística.") +
scale_color_manual(values=c("red","black","purple")) +
theme(legend.position = "bottom")
ggsave(
plot = last_plot(),
filename = "../OUTPUT/Graficos/Nacionales/tasaafiliacionsindical_nooficiales.png",
device = "png",
dpi = "retina",
units = "cm",
width = 25,
height = 20
)
categoria_ocupacion$Año<-as.integer(categoria_ocupacion$Año)
categoria_ocupacion %>% select(Año,ts1,ts2,ts3) %>% pivot_longer(c(ts1,ts2,ts3)) %>%
ggplot(aes(x=Año,y=value,color=name)) + geom_line() + geom_point() +theme_bw() +
labs(title = "Tasas de afiliación sindical en Chile no oficiales (2010-2020)",
x="Tiempo",
y = "Sindicatos",
caption = "Por Repositorio de Estadísticas Sindicales (RES),
En base a datos de la Ventanilla Sindical Transparencia Dirección del Trabajo y
Series históricas de ocupados del Instituto Nacional de Estadística.") +
scale_color_manual(values=c("red","black","purple")) +
theme(legend.position = "bottom")
categoria_ocupacion$Año<-as.numeric(categoria_ocupacion$Año)
categoria_ocupacion %>% select(Año,ts1,ts2,ts3) %>% pivot_longer(c(ts1,ts2,ts3)) %>%
ggplot(aes(x=Año,y=value,color=name)) + geom_line() + geom_point() +theme_bw() +
labs(title = "Tasas de afiliación sindical en Chile no oficiales (2010-2020)",
x="Tiempo",
y = "Sindicatos",
caption = "Por Repositorio de Estadísticas Sindicales (RES),
En base a datos de la Ventanilla Sindical Transparencia Dirección del Trabajo y
Series históricas de ocupados del Instituto Nacional de Estadística.") +
scale_color_manual(values=c("red","black","purple")) +
theme(legend.position = "bottom")
categoria_ocupacion %>%
mutate(Año=year(Año)) %>%
select(Año,ts1,ts2,ts3) %>% pivot_longer(c(ts1,ts2,ts3)) %>%
ggplot(aes(x=Año,y=value,color=name)) + geom_line() + geom_point() +theme_bw() +
labs(title = "Tasas de afiliación sindical en Chile no oficiales (2010-2020)",
x="Tiempo",
y = "Sindicatos",
caption = "Por Repositorio de Estadísticas Sindicales (RES),
En base a datos de la Ventanilla Sindical Transparencia Dirección del Trabajo y
Series históricas de ocupados del Instituto Nacional de Estadística.") +
scale_color_manual(values=c("red","black","purple")) +
theme(legend.position = "bottom")
categoria_ocupacion %>%
mutate(Año=year(Año))
categoria_ocupacion %>%
mutate(Año=make_date(year=Año)) %>%
select(Año,ts1,ts2,ts3) %>% pivot_longer(c(ts1,ts2,ts3)) %>%
ggplot(aes(x=Año,y=value,color=name)) + geom_line() + geom_point() +theme_bw() +
labs(title = "Tasas de afiliación sindical en Chile no oficiales (2010-2020)",
x="Tiempo",
y = "Sindicatos",
caption = "Por Repositorio de Estadísticas Sindicales (RES),
En base a datos de la Ventanilla Sindical Transparencia Dirección del Trabajo y
Series históricas de ocupados del Instituto Nacional de Estadística.") +
scale_color_manual(values=c("red","black","purple")) +
theme(legend.position = "bottom")
categoria_ocupacion %>%
mutate(Año=make_date(year=Año)) %>%
select(Año,ts1,ts2,ts3) %>% pivot_longer(c(ts1,ts2,ts3)) %>%
ggplot(aes(x=Año,y=value,color=name)) + geom_line() + geom_point() +theme_bw() +
labs(title = "Tasas de afiliación sindical en Chile no oficiales (2010-2020)",
x="Tiempo",
y = "Sindicatos",
caption = "Por Repositorio de Estadísticas Sindicales (RES),
En base a datos de la Ventanilla Sindical Transparencia Dirección del Trabajo y
Series históricas de ocupados del Instituto Nacional de Estadística.") +
scale_color_manual(values=c("red","black","purple")) +
theme(legend.position = "bottom")
ggsave(
plot = last_plot(),
filename = "../OUTPUT/Graficos/Nacionales/tasaafiliacionsindical_nooficiales.png",
device = "png",
dpi = "retina",
units = "cm",
width = 25,
height = 20
)
categoria_ocupacion %>%
mutate(Año=make_date(year=Año)) %>%
select(Año,ts1,ts2,ts3)
categoria_ocupacion %>% select(Año,ts1,ts2,ts3,s1,ft_ocupada1,s2,ft_ocupada2,s3,ft_ocupada3)
categoria_ocupacion %>%
select(Año,ts1,ts2,ts3,s1,ft_ocupada1,s2,ft_ocupada2,s3,ft_ocupada3) %>% kable()
categoria_ocupacion %>%
select(Año,ts1,ts2,ts3,s1,ft_ocupada1,s2,ft_ocupada2,s3,ft_ocupada3) %>% knitr::kable()
